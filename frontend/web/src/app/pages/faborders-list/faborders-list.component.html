<div class="container-list-page">
    <div class="header-page">
        <div class="title-list-container">
            <span>Órdenes de fabricación</span>
        </div>
        <div class="filter-select" *ngIf="!filterDataOrders.docNum || filterDataOrders.docNum === 0">
            <span class="dateType" *ngIf="isDateInit">
                Fecha inicio:
            </span>
            <span class="dateType" *ngIf="!isDateInit">
                Fecha finalización:
            </span>
            <span class="date-selected">
             {{ rangeDate}}
            </span>
        </div>
        <div class="filter-select" *ngIf="filterDataOrders.docNum && filterDataOrders.docNum !== 0">
            <span class="dateType">
                Número de pedido buscado:
            </span>
            <span class="date-selected">
             {{ filterDataOrders.docNum}}
            </span>
        </div>
    </div>

    <div class="table-toolbar">
        <div class="table-toolbar-search">
        </div>
        <div class="table-toolbar-buttons">
            <button mat-raised-button class="button-blue" (click)="createOrderIsolated()" >
                &nbsp; Crear orden &nbsp;
            </button>
            <button mat-raised-button class="button-blue" (click)="asignOrder()" >
                &nbsp; Asignar
            </button>
            <button mat-raised-button class="button-blue" (click)="reAsignOrder()" >
                &nbsp; Reasignar
            </button>
            <button mat-raised-button class="button-blue" (click)="finalizeOrder()" >
                &nbsp; Finalizar &nbsp;
            </button>
            <button mat-raised-button class="button-blue" (click)="cancelOrder()" >
                &nbsp; Cancelar &nbsp;
            </button>
            <button mat-raised-button class="button-blue margin-left-options" (click)="openSearchOrders()" >
                <mat-icon *ngIf="isSearchWithFilter">filter_tilt_shift
                </mat-icon>
                &nbsp; Buscar &nbsp;
            </button>
        </div>
    </div>

    <div class="list-users-container">
        <div  class="table-container scroll-custom">
            <table mat-table [dataSource]="dataSource"  [ngClass]="dataSource.data.length !== 0 ? 'mat-elevation-z8': ''">
                <ng-container matColumnDef="seleccion">&nbsp;
                    <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox [checked]="allComplete" [indeterminate]="someComplete()" (change)="setAll($event.checked)"></mat-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let element" class="seleccion">
                        <mat-checkbox [(ngModel)]="element.isChecked" (ngModelChange)="updateAllComplete()"></mat-checkbox>
                    </td>
                    <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
                <ng-container matColumnDef="cons">
                    <th mat-header-cell *matHeaderCellDef class="centered">#</th>
                    <td mat-cell *matCellDef="let element; let i = index;" class="color-text-intables tdcell tdcell-center documento"> {{i+1}} </td>
                    <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <ng-container matColumnDef="pedido">
                    <th mat-header-cell *matHeaderCellDef class="mobile-hide"> PEDIDO </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell mobile-hide codigocliente"> {{element.docNum}} </td>
                </ng-container>

                <ng-container matColumnDef="orden">
                    <th mat-header-cell *matHeaderCellDef class="mobile-hide">  N° DE ORDEN DE FABRICACIÓN </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdphone mobile-hide cliente"> {{element.fabOrderId}} </td>
                </ng-container>

                <ng-container matColumnDef="codigoproducto">
                    <th mat-header-cell *matHeaderCellDef class="mobile-hide">  CÓDIGO DEL PRODUCTO </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell mobile-hide medico"> {{element.itemCode}} </td>
                </ng-container>

                <ng-container matColumnDef="descripcion">
                    <th mat-header-cell *matHeaderCellDef class="mobile-hide">  DESCRIPCIÓN DEL PRODUCTO </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell mobile-hide asesor"> {{element.description}} </td>
                </ng-container>

                <ng-container matColumnDef="cantidadplanificada">
                    <th mat-header-cell *matHeaderCellDef class="mobile-hide">  CANTIDAD PLANIFICADA </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell mobile-hide asesor"> {{element.quantity}} </td>
                </ng-container>

                <ng-container matColumnDef="fechaorden">
                    <th mat-header-cell *matHeaderCellDef class="centered mobile-hide">  FECHA ÓRDEN DE FABRICACIÓN </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide fechainicio"> {{element.createDate.substring(10, 0)}} </td>
                </ng-container>

                <ng-container matColumnDef="fechatermino">
                    <th mat-header-cell *matHeaderCellDef class="centered mobile-hide">  FECHA DE TERMINO (QFB) </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide fechatermino"> {{element.finishDate.substring(10, 0)}} </td>
                </ng-container>

                <ng-container matColumnDef="qfbasignado">
                    <th mat-header-cell *matHeaderCellDef class="centered mobile-hide">  QFB ASIGNADO </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide qfb"> {{element.qfb}} </td>
                </ng-container>

                <ng-container matColumnDef="estatus">
                    <th mat-header-cell *matHeaderCellDef class="centered mobile-hide">  ESTATUS DE LA ORDEN </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide status"> <button mat-stroked-button [ngClass]="element.class">{{element.status}}</button> </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns" class="color-text-intables"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <div class="no-users-registered mat-elevation-z8" *ngIf="dataSource.data.length === 0">
                <span>No hay pedidos registrados</span>
            </div>
        </div>
        <div *ngIf="dataSource.data.length !== 0" class="paginator-container">
            <mat-paginator
                    [pageSizeOptions]="[5, 10, 15 ,20]"
                    [pageSize]="limit"
                    [length]="lengthPaginator"
                    [pageIndex]="pageIndex"
                    (page)="pageEvent = changeDataEvent($event)"
            ></mat-paginator>
        </div>
    </div>
</div>

