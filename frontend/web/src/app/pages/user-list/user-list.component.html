<div class="container-list-page">
    <div class="header-page">
        <div class="title-list-container">
            <span>Usuarios</span>
        </div>

        <div class="add-user-container">
            <div class="icon-add" (click)="openDialog('addModal','')">
                <svg data-toggle="modal" data-target="#agregar" xmlns="http://www.w3.org/2000/svg" width="30"
                     height="30" viewBox="0 0 24 24" fill="none" stroke=" #888ea8" stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round" class="feather feather-user-plus">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="8.5" cy="7" r="4"></circle>
                    <line x1="20" y1="8" x2="20" y2="14"></line>
                    <line x1="23" y1="11" x2="17" y2="11"></line>
                </svg>
            </div>
            <button mat-raised-button class="button-blue-user-list" (click)="openSearchUsers()">
                <mat-icon *ngIf="searchUsersData.activoSe && searchUsersData.activoSe !== '' ||
                                 searchUsersData.asignableSe && searchUsersData.asignableSe !== '' ||
                                 searchUsersData.firstNameSe && searchUsersData.firstNameSe !== '' ||
                                 searchUsersData.lastNameSe && searchUsersData.lastNameSe !== '' ||
                                 searchUsersData.userNameSe && searchUsersData.userNameSe !== '' ||
                                 searchUsersData.userTypeRSe && searchUsersData.userTypeRSe !== ''">search
                </mat-icon>
                Buscar
            </button>
        </div>
    </div>
    <div class="list-users-container">
        <div class="table-container">
            <table  mat-table [dataSource]="dataSource"  [ngClass]="dataSource.data.length !== 0 ? 'mat-elevation-z8': ''">

                <!-- Position Column -->
                <ng-container matColumnDef="delete">
                    <th mat-header-cell *matHeaderCellDef>
                        <mat-checkbox
                                [checked]="isAllComplete"
                                [indeterminate]="someComplete()"
                                (change)="setAll($event.checked)"
                        >
                        </mat-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <mat-checkbox [(ngModel)]="element.isChecked"
                                      (ngModelChange)="updateAllComplete()"
                        >
                        </mat-checkbox>
                    </td>
                </ng-container>

                <ng-container matColumnDef="username">
                    <th mat-header-cell class="centered" *matHeaderCellDef > USUARIO </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell-center tdcell"> {{element.userName }} </td>
                </ng-container>

                <ng-container matColumnDef="names">
                    <th mat-header-cell class="centered" *matHeaderCellDef > NOMBRE(S) </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell-center tdcell"> {{element.firstName | uppercase}} </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="lastName">
                    <th mat-header-cell class="centered mobile-hide" *matHeaderCellDef  > APELLIDO(S) </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell mobile-hide tdcell-center"> {{element.lastName | uppercase}} </td>
                </ng-container>

                <!-- Weight Column -->
                <ng-container matColumnDef="role">
                    <th mat-header-cell class="centered mobile-hide" *matHeaderCellDef > ROL</th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell text-center mobile-hide tdcell-center" >
                        <span *ngIf="element.role === 2">QFB</span>
                        <span *ngIf="element.role === 1">ADMINISTRADOR</span>
                        <span *ngIf="element.role === 3">LOGÍSTICA</span>
                        <span *ngIf="element.role === 4">DISEÑO</span>
                        <span *ngIf="element.role === 5">ALMACÉN</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="pieces">
                    <th mat-header-cell class="centered mobile-hide" *matHeaderCellDef > PIEZAS MÁXIMAS</th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell text-center mobile-hide tdcell-center" >
                        {{element.role !== 1 && element.role !== 3 && element.role !== 4 && element.role !== 5 ? element.piezas : 'NO APLICA'}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="asignable">
                    <th mat-header-cell class="centered mobile-hide" *matHeaderCellDef > ASIGNACIONES</th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell text-center mobile-hide tdcell-center" >
                        {{element.role !== 1 && element.role !== 3 && element.role !== 4 && element.role !== 5 ? element.asignable === 1 ? 'ENCENDIDO' : 'APAGADO' : 'NO APLICA'}}
                    </td>
                </ng-container>
                <!-- Symbol Column -->
                <ng-container matColumnDef="status">
                    <th mat-header-cell class="centered mobile-hide mobile-hide" *matHeaderCellDef > ESTATUS </th>
                    <td mat-cell *matCellDef="let element" class="color-text-intables tdcell text-center mobile-hide" > {{element.activo == 1 ? "ACTIVO" : "INACTIVO"}} </td>
                </ng-container>

                <ng-container matColumnDef="actions">
                    <th mat-header-cell class="tdcell tdcell-center delete-many-icon" *matHeaderCellDef >
                        <button mat-icon-button class="ico-col-pri" (click)="deleteUsers('')">
                            <mat-icon class="icon-many-delete">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                     stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                     class="delete-multiple">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                    <line x1="10" y1="11" x2="10" y2="17"></line>
                                    <line x1="14" y1="11" x2="14" y2="17"></line>
                                </svg>
                            </mat-icon>
                        </button>
                    </th>
                    <td mat-cell *matCellDef="let element" class="tdcell tdcell-center tdactions">
                        <button mat-icon-button class="ico-col-pri" (click)="openDialog('editModal',element.id)" >
                            <mat-icon class="icon-many-delete">
                                <svg data-toggle="modal" data-target="#editar" xmlns="http://www.w3.org/2000/svg" width="24"
                                     height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                     stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2 edit">
                                    <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
                                </svg>
                            </mat-icon>
                        </button>

                        <button mat-icon-button class="ico-col-pri" (click)="deleteUsers(element.id)">
                            <mat-icon class="icon-many-delete">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                     class="feather feather-user-minus delete">
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="8.5" cy="7" r="4"></circle>
                                    <line x1="23" y1="11" x2="17" y2="11"></line>
                                </svg>
                            </mat-icon>
                        </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <div class="no-users-registered mat-elevation-z8" *ngIf="dataSource.data.length === 0">
                <span *ngIf="!isOnInit">No hay usuarios registrados</span>
                <span *ngIf="isOnInit"> Cargando usuarios ...</span>
            </div>
        </div>
        <div *ngIf="dataSource.data.length !== 0" class="paginator-container">
            <mat-paginator
                    [pageSizeOptions]="[5, 10, 15, 20]"
                    [pageSize]="pageSize"
                    [length]="lengthPaginator"
                    [pageIndex]="pageIndex"
                    (page)="pageEvent = changeDataEvent($event)"
            ></mat-paginator>
        </div>
    </div>
</div>
