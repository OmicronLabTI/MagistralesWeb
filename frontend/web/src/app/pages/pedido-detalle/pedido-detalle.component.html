
<div class="container-list-page">
    <div class="header-page">
      <div class="title-list-container">
        <span>Detalle del pedido</span>
        <div class="breadcrumb"><a class="breadcrumblink" [routerLink]="['pedidos']">Pedidos</a> / Detalle del pedido</div>
      </div>
      <div class="filter-select">
        <div class="docbase">Número de pedido: <span class="spandoc">{{docNum}}</span></div>
        <div class="docbase-status">Estatus del pedido: <span class="spnstatus">{{docStatus}}</span> </div>
      </div>
    </div>
  
    <div class="table-toolbar">
      <div class="table-toolbar-search">
      </div>
      <div class="table-toolbar-buttons">
        <button [disabled]="!isThereOrdersDetailToPlan" mat-raised-button [ngClass]="isThereOrdersDetailToPlan ? 'button-blue' : 'disable-button'" (click)="processOrdersDetail()">
          &nbsp; Planificar &nbsp;
        </button>

        <button [disabled]="!isThereOrdersDetailToPlace" mat-raised-button [ngClass]="isThereOrdersDetailToPlace ? 'button-blue' : 'disable-button'" (click)="openPlaceOrderDialog()">
          &nbsp; Asignar &nbsp; 
        </button>

        <button [disabled]="!isThereOrdersDetailToReassign" mat-raised-button [ngClass]="isThereOrdersDetailToReassign ? 'button-blue' : 'disable-button'" (click)="reassignOrderDetail()">
          &nbsp; Reasignar &nbsp; 
        </button>

        <button [disabled]="!isThereOrdersDetailToFinalize" mat-raised-button [ngClass]="isThereOrdersDetailToFinalize ? 'button-blue' : 'disable-button'" (click)="finalizeOrdersDetail()">
          &nbsp; Finalizar &nbsp; 
        </button>

        <button mat-raised-button [disabled]="!isThereOrdersDetailToCancel" [ngClass]="isThereOrdersDetailToCancel ? 'button-blue' : 'disable-button'" (click)="cancelOrders()">
          Cancelar
        </button>
      </div>
    </div>
  
    <div class="list-users-container">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="seleccion">&nbsp;
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox [checked]="allComplete" [indeterminate]="someComplete()" (change)="setAll($event.checked)"></mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let element" class="seleccion">
                <mat-checkbox [(ngModel)]="element.isChecked" (ngModelChange)="updateAllComplete()"></mat-checkbox>
              </td>
            </ng-container>
            <ng-container matColumnDef="cons">
              <th mat-header-cell *matHeaderCellDef class="centered">#</th>
              <td mat-cell *matCellDef="let element; let i = index;" class="color-text-intables tdcell tdcell-center consecutivo"> {{i+1}} </td>
            </ng-container>
          
            <ng-container matColumnDef="ordenFabricacionId">
                <th mat-header-cell *matHeaderCellDef class=""> N° DE ORDEN DE FABRICACIÓN</th>
                <td mat-cell *matCellDef="let element" class="color-text-intables tdcell of"> <span *ngIf="element.ordenFabricacionId !== 0">{{element.ordenFabricacionId}}</span> </td>
              </ng-container>

            <ng-container matColumnDef="codigoProducto">
              <th mat-header-cell *matHeaderCellDef class="mobile-hide"> CÓDIGO DEL PRODUCTO </th>
              <td mat-cell *matCellDef="let element" class="color-text-intables tdcell mobile-hide codigoproducto"> {{element.codigoProducto}} </td>
            </ng-container>
          
            <ng-container matColumnDef="descripcionProducto">
              <th mat-header-cell *matHeaderCellDef class="mobile-hide"> DESCRIPCIÓN DEL PRODUCTO </th>
              <td mat-cell matTooltip="{{element.descripcionProducto}}"
              matTooltipPosition="right"
              aria-label="Button that displays a tooltip in various positions" *matCellDef="let element" class="color-text-intables tdcell mobile-hide descripcionproducto"> {{ (element.descripcionProducto.length > 42) ? (element.descripcionProducto | slice:0:42) + '...' : element.descripcionProducto }} </td>
            </ng-container>
    
            <ng-container matColumnDef="qtyPlanned">
              <th mat-header-cell *matHeaderCellDef class="mobile-hide centered">  CANTIDAD PLANIFICADA </th>
              <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide cantplan"> {{element.qtyPlanned}} </td>| number:'1.2-2'
            </ng-container>
  
            <ng-container matColumnDef="fechaOF">
              <th mat-header-cell *matHeaderCellDef class="mobile-hide centered">  FECHA DE ORDEN DE FABRICACIÓN </th>
              <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide fechaorden"> {{element.fechaOf}} </td>
            </ng-container>
  
            <ng-container matColumnDef="fechaOFFin">
              <th mat-header-cell *matHeaderCellDef class="centered mobile-hide">  FECHA DE TÉRMINO (QFB) </th>
              <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide fechatermino"> {{element.fechaOfFin}} </td>
            </ng-container>
  
            <ng-container matColumnDef="qfb">
              <th mat-header-cell *matHeaderCellDef class="centered mobile-hide">  QFB ASIGNADO </th>
              <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide qfb"> {{element.qfb}} </td>
            </ng-container>
  
            <ng-container matColumnDef="statusOF">
              <th mat-header-cell *matHeaderCellDef class="centered mobile-hide"> ESTATUS DE LA ORDEN </th>
              <td mat-cell *matCellDef="let element" class="color-text-intables tdcell tdcell-center mobile-hide status"> <button mat-stroked-button [ngClass]="element.class">{{element.status}}</button> </td>
            </ng-container>
    
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef  class="centered">  ACCIONES </th>
              <td mat-cell *matCellDef="let element" class="tdcell tdcell-center tdactions"> 
                  <button mat-icon-button class="ico-col-pri" *ngIf="element.ordenFabricacionId !== 0" [routerLink]="['/ordenfabricacion', element.ordenFabricacionId]">
                    <mat-icon ><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="2em" height="2em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M27.231 23.618L20 13.675V4h2V2H10v2h2v9.675l-7.231 9.943A4.018 4.018 0 0 0 8.019 30H23.98a4.018 4.018 0 0 0 3.25-6.382zM14 14.325V4h4v10.325L20.673 18h-9.346zM23.981 28H8.02a2.02 2.02 0 0 1-1.633-3.206L9.873 20h12.254l3.487 4.794A2.02 2.02 0 0 1 23.981 28z" fill="#626262"></path></svg></mat-icon>
                  </button>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="color-text-intables"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  </div>

